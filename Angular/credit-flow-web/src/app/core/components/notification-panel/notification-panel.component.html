<div class="notification-panel-wrapper">
  <!-- Notification Center Icon -->
  <div class="notification-trigger" (click)="togglePanel()" [@fadeIn]>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
      <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
    </svg>
    @if (unreadCount() > 0) {
      <span class="badge">{{ unreadCount() }}</span>
    }
  </div>

  <!-- Notification Panel -->
  @if (isPanelOpen()) {
    <div class="notification-panel" [@slideIn]>
      <!-- Header -->
      <div class="panel-header">
        <h2>Notifications</h2>
        <button class="close-btn" (click)="togglePanel()" aria-label="Close notifications">âœ•</button>
      </div>

      <!-- Notifications List -->
      <div class="notifications-list">
        @if (notificationItems().length === 0) {
          <div class="empty-state">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <p>No notifications yet</p>
          </div>
        } @else {
          @for (notif of notificationItems(); track notif.id) {
            <div class="notification-item" [class]="'notification-' + notif.type" [class.unread]="!notif.isRead" [@fadeIn]>
              <div class="notification-icon">
                {{ getIcon(notif.type) }}
              </div>
              <div class="notification-content">
                <h4>{{ notif.title }}</h4>
                <p>{{ notif.message }}</p>
                <span class="timestamp">{{ formatTime(notif.timestamp) }}</span>
              </div>
              <button class="mark-read-btn" (click)="markAsRead(notif.id)" aria-label="Mark as read">
                @if (!notif.isRead) {
                  <span class="dot"></span>
                }
              </button>
            </div>
          }
        }
      </div>

      <!-- Footer -->
      <div class="panel-footer">
        <button class="clear-btn" (click)="clearAll()" [disabled]="notificationItems().length === 0">
          Clear All
        </button>
      </div>
    </div>
  }
</div>
